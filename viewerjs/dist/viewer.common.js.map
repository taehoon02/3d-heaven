{"version":3,"file":"viewer.common.js","sources":["../src/js/defaults.js","../src/js/template.js","../src/js/constants.js","../src/js/utilities.js","../src/js/render.js","../src/js/events.js","../src/js/handlers.js","../src/js/methods.js","../src/js/others.js","../src/js/viewer.js"],"sourcesContent":["export default {\n  // Enable inline mode\n  inline: false,\n\n  // Show the button on the top-right of the viewer\n  button: true,\n\n  // Show the navbar\n  navbar: true,\n\n  // Show the title\n  title: true,\n\n  // Show the toolbar\n  toolbar: true,\n\n  // Show the tooltip with image ratio (percentage) when zoom in or zoom out\n  tooltip: true,\n\n  // Enable to move the image\n  movable: true,\n\n  // Enable to zoom the image\n  zoomable: true,\n\n  // Enable to rotate the image\n  rotatable: true,\n\n  // Enable to scale the image\n  scalable: true,\n\n  // Enable CSS3 Transition for some special elements\n  transition: true,\n\n  // Enable to request fullscreen when play\n  fullscreen: true,\n\n  // The amount of time to delay between automatically cycling an image when playing.\n  interval: 5000,\n\n  // Enable keyboard support\n  keyboard: true,\n\n  // Enable a modal backdrop, specify `static` for a backdrop which doesn't close the modal on click\n  backdrop: true,\n\n  // Indicate if show a loading spinner when load image or not.\n  loading: true,\n\n  // Indicate if enable loop viewing or not.\n  loop: true,\n\n  // Min width of the viewer in inline mode\n  minWidth: 200,\n\n  // Min height of the viewer in inline mode\n  minHeight: 100,\n\n  // Define the ratio when zoom the image by wheeling mouse\n  zoomRatio: 0.1,\n\n  // Define the min ratio of the image when zoom out\n  minZoomRatio: 0.01,\n\n  // Define the max ratio of the image when zoom in\n  maxZoomRatio: 100,\n\n  // Define the CSS `z-index` value of viewer in modal mode.\n  zIndex: 2015,\n\n  // Define the CSS `z-index` value of viewer in inline mode.\n  zIndexInline: 0,\n\n  // Define where to get the original image URL for viewing\n  // Type: String (an image attribute) or Function (should return an image URL)\n  url: 'src',\n\n  // Define where to put the viewer in modal mode.\n  // Type: String | Element\n  container: 'body',\n\n  // Filter the images for viewing.\n  // Type: Function (return true if the image is viewable)\n  filter: null,\n\n  // Event shortcuts\n  ready: null,\n  show: null,\n  shown: null,\n  hide: null,\n  hidden: null,\n  view: null,\n  viewed: null,\n  zoom: null,\n  zoomed: null,\n};\n","export default (\n  '<div class=\"viewer-container\" touch-action=\"none\">' +\n    '<div class=\"viewer-canvas\"></div>' +\n    '<div class=\"viewer-footer\">' +\n      '<div class=\"viewer-title\"></div>' +\n      '<div class=\"viewer-toolbar\"></div>' +\n      '<div class=\"viewer-navbar\">' +\n        '<ul class=\"viewer-list\"></ul>' +\n      '</div>' +\n    '</div>' +\n    '<div class=\"viewer-tooltip\"></div>' +\n    '<div role=\"button\" class=\"viewer-button\" data-viewer-action=\"mix\"></div>' +\n    '<div class=\"viewer-player\"></div>' +\n  '</div>'\n);\n","export const IN_BROWSER = typeof window !== 'undefined';\nexport const WINDOW = IN_BROWSER ? window : {};\nexport const NAMESPACE = 'viewer';\n\n// Actions\nexport const ACTION_MOVE = 'move';\nexport const ACTION_SWITCH = 'switch';\nexport const ACTION_ZOOM = 'zoom';\n\n// Classes\nexport const CLASS_ACTIVE = `${NAMESPACE}-active`;\nexport const CLASS_CLOSE = `${NAMESPACE}-close`;\nexport const CLASS_FADE = `${NAMESPACE}-fade`;\nexport const CLASS_FIXED = `${NAMESPACE}-fixed`;\nexport const CLASS_FULLSCREEN = `${NAMESPACE}-fullscreen`;\nexport const CLASS_FULLSCREEN_EXIT = `${NAMESPACE}-fullscreen-exit`;\nexport const CLASS_HIDE = `${NAMESPACE}-hide`;\nexport const CLASS_HIDE_MD_DOWN = `${NAMESPACE}-hide-md-down`;\nexport const CLASS_HIDE_SM_DOWN = `${NAMESPACE}-hide-sm-down`;\nexport const CLASS_HIDE_XS_DOWN = `${NAMESPACE}-hide-xs-down`;\nexport const CLASS_IN = `${NAMESPACE}-in`;\nexport const CLASS_INVISIBLE = `${NAMESPACE}-invisible`;\nexport const CLASS_LOADING = `${NAMESPACE}-loading`;\nexport const CLASS_MOVE = `${NAMESPACE}-move`;\nexport const CLASS_OPEN = `${NAMESPACE}-open`;\nexport const CLASS_SHOW = `${NAMESPACE}-show`;\nexport const CLASS_TRANSITION = `${NAMESPACE}-transition`;\n\n// Events\nexport const EVENT_READY = 'ready';\nexport const EVENT_SHOW = 'show';\nexport const EVENT_SHOWN = 'shown';\nexport const EVENT_HIDE = 'hide';\nexport const EVENT_HIDDEN = 'hidden';\nexport const EVENT_VIEW = 'view';\nexport const EVENT_VIEWED = 'viewed';\nexport const EVENT_ZOOM = 'zoom';\nexport const EVENT_ZOOMED = 'zoomed';\nexport const EVENT_CLICK = 'click';\nexport const EVENT_DRAG_START = 'dragstart';\nexport const EVENT_KEY_DOWN = 'keydown';\nexport const EVENT_LOAD = 'load';\nexport const EVENT_POINTER_DOWN = WINDOW.PointerEvent ? 'pointerdown' : 'touchstart mousedown';\nexport const EVENT_POINTER_MOVE = WINDOW.PointerEvent ? 'pointermove' : 'touchmove mousemove';\nexport const EVENT_POINTER_UP = WINDOW.PointerEvent ? 'pointerup pointercancel' : 'touchend touchcancel mouseup';\nexport const EVENT_RESIZE = 'resize';\nexport const EVENT_TRANSITION_END = 'transitionend';\nexport const EVENT_WHEEL = 'wheel mousewheel DOMMouseScroll';\n\n// Data keys\nexport const DATA_ACTION = `${NAMESPACE}Action`;\nexport const BUTTONS = [\n  'zoom-in',\n  'zoom-out',\n  'one-to-one',\n  'reset',\n  'prev',\n  'play',\n  'next',\n  'rotate-left',\n  'rotate-right',\n  'flip-horizontal',\n  'flip-vertical',\n];\n","import {\n  CLASS_HIDE_MD_DOWN,\n  CLASS_HIDE_SM_DOWN,\n  CLASS_HIDE_XS_DOWN,\n  IN_BROWSER,\n  WINDOW,\n} from './constants';\n\n/**\n * Check if the given value is a string.\n * @param {*} value - The value to check.\n * @returns {boolean} Returns `true` if the given value is a string, else `false`.\n */\nexport function isString(value) {\n  return typeof value === 'string';\n}\n\n/**\n * Check if the given value is not a number.\n */\nexport const isNaN = Number.isNaN || WINDOW.isNaN;\n\n/**\n * Check if the given value is a number.\n * @param {*} value - The value to check.\n * @returns {boolean} Returns `true` if the given value is a number, else `false`.\n */\nexport function isNumber(value) {\n  return typeof value === 'number' && !isNaN(value);\n}\n\n/**\n * Check if the given value is undefined.\n * @param {*} value - The value to check.\n * @returns {boolean} Returns `true` if the given value is undefined, else `false`.\n */\nexport function isUndefined(value) {\n  return typeof value === 'undefined';\n}\n\n/**\n * Check if the given value is an object.\n * @param {*} value - The value to check.\n * @returns {boolean} Returns `true` if the given value is an object, else `false`.\n */\nexport function isObject(value) {\n  return typeof value === 'object' && value !== null;\n}\n\nconst { hasOwnProperty } = Object.prototype;\n\n/**\n * Check if the given value is a plain object.\n * @param {*} value - The value to check.\n * @returns {boolean} Returns `true` if the given value is a plain object, else `false`.\n */\nexport function isPlainObject(value) {\n  if (!isObject(value)) {\n    return false;\n  }\n\n  try {\n    const { constructor } = value;\n    const { prototype } = constructor;\n\n    return constructor && prototype && hasOwnProperty.call(prototype, 'isPrototypeOf');\n  } catch (e) {\n    return false;\n  }\n}\n\n/**\n * Check if the given value is a function.\n * @param {*} value - The value to check.\n * @returns {boolean} Returns `true` if the given value is a function, else `false`.\n */\nexport function isFunction(value) {\n  return typeof value === 'function';\n}\n\n/**\n * Iterate the given data.\n * @param {*} data - The data to iterate.\n * @param {Function} callback - The process function for each element.\n * @returns {*} The original data.\n */\nexport function forEach(data, callback) {\n  if (data && isFunction(callback)) {\n    if (Array.isArray(data) || isNumber(data.length)/* array-like */) {\n      const { length } = data;\n      let i;\n\n      for (i = 0; i < length; i += 1) {\n        if (callback.call(data, data[i], i, data) === false) {\n          break;\n        }\n      }\n    } else if (isObject(data)) {\n      Object.keys(data).forEach((key) => {\n        callback.call(data, data[key], key, data);\n      });\n    }\n  }\n\n  return data;\n}\n\n/**\n * Extend the given object.\n * @param {*} obj - The object to be extended.\n * @param {*} args - The rest objects which will be merged to the first object.\n * @returns {Object} The extended object.\n */\nexport const assign = Object.assign || function assign(obj, ...args) {\n  if (isObject(obj) && args.length > 0) {\n    args.forEach((arg) => {\n      if (isObject(arg)) {\n        Object.keys(arg).forEach((key) => {\n          obj[key] = arg[key];\n        });\n      }\n    });\n  }\n\n  return obj;\n};\n\nconst REGEXP_SUFFIX = /^(?:width|height|left|top|marginLeft|marginTop)$/;\n\n/**\n * Apply styles to the given element.\n * @param {Element} element - The target element.\n * @param {Object} styles - The styles for applying.\n */\nexport function setStyle(element, styles) {\n  const { style } = element;\n\n  forEach(styles, (value, property) => {\n    if (REGEXP_SUFFIX.test(property) && isNumber(value)) {\n      value += 'px';\n    }\n\n    style[property] = value;\n  });\n}\n\n/**\n * Check if the given element has a special class.\n * @param {Element} element - The element to check.\n * @param {string} value - The class to search.\n * @returns {boolean} Returns `true` if the special class was found.\n */\nexport function hasClass(element, value) {\n  return element.classList ?\n    element.classList.contains(value) :\n    element.className.indexOf(value) > -1;\n}\n\n/**\n * Add classes to the given element.\n * @param {Element} element - The target element.\n * @param {string} value - The classes to be added.\n */\nexport function addClass(element, value) {\n  if (!value) {\n    return;\n  }\n\n  if (isNumber(element.length)) {\n    forEach(element, (elem) => {\n      addClass(elem, value);\n    });\n    return;\n  }\n\n  if (element.classList) {\n    element.classList.add(value);\n    return;\n  }\n\n  const className = element.className.trim();\n\n  if (!className) {\n    element.className = value;\n  } else if (className.indexOf(value) < 0) {\n    element.className = `${className} ${value}`;\n  }\n}\n\n/**\n * Remove classes from the given element.\n * @param {Element} element - The target element.\n * @param {string} value - The classes to be removed.\n */\nexport function removeClass(element, value) {\n  if (!value) {\n    return;\n  }\n\n  if (isNumber(element.length)) {\n    forEach(element, (elem) => {\n      removeClass(elem, value);\n    });\n    return;\n  }\n\n  if (element.classList) {\n    element.classList.remove(value);\n    return;\n  }\n\n  if (element.className.indexOf(value) >= 0) {\n    element.className = element.className.replace(value, '');\n  }\n}\n\n/**\n * Add or remove classes from the given element.\n * @param {Element} element - The target element.\n * @param {string} value - The classes to be toggled.\n * @param {boolean} added - Add only.\n */\nexport function toggleClass(element, value, added) {\n  if (!value) {\n    return;\n  }\n\n  if (isNumber(element.length)) {\n    forEach(element, (elem) => {\n      toggleClass(elem, value, added);\n    });\n    return;\n  }\n\n  // IE10-11 doesn't support the second parameter of `classList.toggle`\n  if (added) {\n    addClass(element, value);\n  } else {\n    removeClass(element, value);\n  }\n}\n\nconst REGEXP_HYPHENATE = /([a-z\\d])([A-Z])/g;\n\n/**\n * Transform the given string from camelCase to kebab-case\n * @param {string} value - The value to transform.\n * @returns {string} The transformed value.\n */\nexport function hyphenate(value) {\n  return value.replace(REGEXP_HYPHENATE, '$1-$2').toLowerCase();\n}\n\n/**\n * Get data from the given element.\n * @param {Element} element - The target element.\n * @param {string} name - The data key to get.\n * @returns {string} The data value.\n */\nexport function getData(element, name) {\n  if (isObject(element[name])) {\n    return element[name];\n  } else if (element.dataset) {\n    return element.dataset[name];\n  }\n\n  return element.getAttribute(`data-${hyphenate(name)}`);\n}\n\n/**\n * Set data to the given element.\n * @param {Element} element - The target element.\n * @param {string} name - The data key to set.\n * @param {string} data - The data value.\n */\nexport function setData(element, name, data) {\n  if (isObject(data)) {\n    element[name] = data;\n  } else if (element.dataset) {\n    element.dataset[name] = data;\n  } else {\n    element.setAttribute(`data-${hyphenate(name)}`, data);\n  }\n}\n\n/**\n * Remove data from the given element.\n * @param {Element} element - The target element.\n * @param {string} name - The data key to remove.\n */\nexport function removeData(element, name) {\n  if (isObject(element[name])) {\n    try {\n      delete element[name];\n    } catch (e) {\n      element[name] = undefined;\n    }\n  } else if (element.dataset) {\n    // #128 Safari not allows to delete dataset property\n    try {\n      delete element.dataset[name];\n    } catch (e) {\n      element.dataset[name] = undefined;\n    }\n  } else {\n    element.removeAttribute(`data-${hyphenate(name)}`);\n  }\n}\n\nconst REGEXP_SPACES = /\\s\\s*/;\nconst onceSupported = (() => {\n  let supported = false;\n\n  if (IN_BROWSER) {\n    let once = false;\n    const listener = () => {};\n    const options = Object.defineProperty({}, 'once', {\n      get() {\n        supported = true;\n        return once;\n      },\n\n      /**\n       * This setter can fix a `TypeError` in strict mode\n       * {@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Errors/Getter_only}\n       * @param {boolean} value - The value to set\n       */\n      set(value) {\n        once = value;\n      },\n    });\n\n    WINDOW.addEventListener('test', listener, options);\n    WINDOW.removeEventListener('test', listener, options);\n  }\n\n  return supported;\n})();\n\n/**\n * Remove event listener from the target element.\n * @param {Element} element - The event target.\n * @param {string} type - The event type(s).\n * @param {Function} listener - The event listener.\n * @param {Object} options - The event options.\n */\nexport function removeListener(element, type, listener, options = {}) {\n  let handler = listener;\n\n  type.trim().split(REGEXP_SPACES).forEach((event) => {\n    if (!onceSupported) {\n      const { listeners } = element;\n\n      if (listeners && listeners[event] && listeners[event][listener]) {\n        handler = listeners[event][listener];\n        delete listeners[event][listener];\n\n        if (Object.keys(listeners[event]).length === 0) {\n          delete listeners[event];\n        }\n\n        if (Object.keys(listeners).length === 0) {\n          delete element.listeners;\n        }\n      }\n    }\n\n    element.removeEventListener(event, handler, options);\n  });\n}\n\n/**\n * Add event listener to the target element.\n * @param {Element} element - The event target.\n * @param {string} type - The event type(s).\n * @param {Function} listener - The event listener.\n * @param {Object} options - The event options.\n */\nexport function addListener(element, type, listener, options = {}) {\n  let handler = listener;\n\n  type.trim().split(REGEXP_SPACES).forEach((event) => {\n    if (options.once && !onceSupported) {\n      const { listeners = {} } = element;\n\n      handler = (...args) => {\n        delete listeners[event][listener];\n        element.removeEventListener(event, handler, options);\n        listener.apply(element, args);\n      };\n\n      if (!listeners[event]) {\n        listeners[event] = {};\n      }\n\n      if (listeners[event][listener]) {\n        element.removeEventListener(event, listeners[event][listener], options);\n      }\n\n      listeners[event][listener] = handler;\n      element.listeners = listeners;\n    }\n\n    element.addEventListener(event, handler, options);\n  });\n}\n\n/**\n * Dispatch event on the target element.\n * @param {Element} element - The event target.\n * @param {string} type - The event type(s).\n * @param {Object} data - The additional event data.\n * @returns {boolean} Indicate if the event is default prevented or not.\n */\nexport function dispatchEvent(element, type, data) {\n  let event;\n\n  // Event and CustomEvent on IE9-11 are global objects, not constructors\n  if (isFunction(Event) && isFunction(CustomEvent)) {\n    event = new CustomEvent(type, {\n      detail: data,\n      bubbles: true,\n      cancelable: true,\n    });\n  } else {\n    event = document.createEvent('CustomEvent');\n    event.initCustomEvent(type, true, true, data);\n  }\n\n  return element.dispatchEvent(event);\n}\n\n/**\n * Get the offset base on the document.\n * @param {Element} element - The target element.\n * @returns {Object} The offset data.\n */\nexport function getOffset(element) {\n  const box = element.getBoundingClientRect();\n\n  return {\n    left: box.left + (window.pageXOffset - document.documentElement.clientLeft),\n    top: box.top + (window.pageYOffset - document.documentElement.clientTop),\n  };\n}\n\n/**\n * Get transforms base on the given object.\n * @param {Object} obj - The target object.\n * @returns {string} A string contains transform values.\n */\nexport function getTransforms({\n  rotate,\n  scaleX,\n  scaleY,\n  translateX,\n  translateY,\n}) {\n  const values = [];\n\n  if (isNumber(translateX) && translateX !== 0) {\n    values.push(`translateX(${translateX}px)`);\n  }\n\n  if (isNumber(translateY) && translateY !== 0) {\n    values.push(`translateY(${translateY}px)`);\n  }\n\n  // Rotate should come first before scale to match orientation transform\n  if (isNumber(rotate) && rotate !== 0) {\n    values.push(`rotate(${rotate}deg)`);\n  }\n\n  if (isNumber(scaleX) && scaleX !== 1) {\n    values.push(`scaleX(${scaleX})`);\n  }\n\n  if (isNumber(scaleY) && scaleY !== 1) {\n    values.push(`scaleY(${scaleY})`);\n  }\n\n  const transform = values.length ? values.join(' ') : 'none';\n\n  return {\n    WebkitTransform: transform,\n    msTransform: transform,\n    transform,\n  };\n}\n\n/**\n * Get an image name from an image url.\n * @param {string} url - The target url.\n * @example\n * // picture.jpg\n * getImageNameFromURL('http://domain.com/path/to/picture.jpg?size=1280×960')\n * @returns {string} A string contains the image name.\n */\nexport function getImageNameFromURL(url) {\n  return isString(url) ? url.replace(/^.*\\//, '').replace(/[?&#].*$/, '') : '';\n}\n\nconst IS_SAFARI = WINDOW.navigator && /(Macintosh|iPhone|iPod|iPad).*AppleWebKit/i.test(WINDOW.navigator.userAgent);\n\n/**\n * Get an image's natural sizes.\n * @param {string} image - The target image.\n * @param {Function} callback - The callback function.\n * @returns {HTMLImageElement} The new image.\n */\nexport function getImageNaturalSizes(image, callback) {\n  const newImage = document.createElement('img');\n\n  // Modern browsers (except Safari)\n  if (image.naturalWidth && !IS_SAFARI) {\n    callback(image.naturalWidth, image.naturalHeight);\n    return newImage;\n  }\n\n  const body = document.body || document.documentElement;\n\n  newImage.onload = () => {\n    callback(newImage.width, newImage.height);\n\n    if (!IS_SAFARI) {\n      body.removeChild(newImage);\n    }\n  };\n\n  newImage.src = image.src;\n\n  // iOS Safari will convert the image automatically\n  // with its orientation once append it into DOM\n  if (!IS_SAFARI) {\n    newImage.style.cssText = (\n      'left:0;' +\n      'max-height:none!important;' +\n      'max-width:none!important;' +\n      'min-height:0!important;' +\n      'min-width:0!important;' +\n      'opacity:0;' +\n      'position:absolute;' +\n      'top:0;' +\n      'z-index:-1;'\n    );\n    body.appendChild(newImage);\n  }\n\n  return newImage;\n}\n\n/**\n * Get the related class name of a responsive type number.\n * @param {string} type - The responsive type.\n * @returns {string} The related class name.\n */\nexport function getResponsiveClass(type) {\n  switch (type) {\n    case 2:\n      return CLASS_HIDE_XS_DOWN;\n\n    case 3:\n      return CLASS_HIDE_SM_DOWN;\n\n    case 4:\n      return CLASS_HIDE_MD_DOWN;\n\n    default:\n      return '';\n  }\n}\n\n/**\n * Get the max ratio of a group of pointers.\n * @param {string} pointers - The target pointers.\n * @returns {number} The result ratio.\n */\nexport function getMaxZoomRatio(pointers) {\n  const pointers2 = assign({}, pointers);\n  const ratios = [];\n\n  forEach(pointers, (pointer, pointerId) => {\n    delete pointers2[pointerId];\n\n    forEach(pointers2, (pointer2) => {\n      const x1 = Math.abs(pointer.startX - pointer2.startX);\n      const y1 = Math.abs(pointer.startY - pointer2.startY);\n      const x2 = Math.abs(pointer.endX - pointer2.endX);\n      const y2 = Math.abs(pointer.endY - pointer2.endY);\n      const z1 = Math.sqrt((x1 * x1) + (y1 * y1));\n      const z2 = Math.sqrt((x2 * x2) + (y2 * y2));\n      const ratio = (z2 - z1) / z1;\n\n      ratios.push(ratio);\n    });\n  });\n\n  ratios.sort((a, b) => Math.abs(a) < Math.abs(b));\n\n  return ratios[0];\n}\n\n/**\n * Get a pointer from an event object.\n * @param {Object} event - The target event object.\n * @param {boolean} endOnly - Indicates if only returns the end point coordinate or not.\n * @returns {Object} The result pointer contains start and/or end point coordinates.\n */\nexport function getPointer({ pageX, pageY }, endOnly) {\n  const end = {\n    endX: pageX,\n    endY: pageY,\n  };\n\n  return endOnly ? end : assign({\n    startX: pageX,\n    startY: pageY,\n  }, end);\n}\n\n/**\n * Get the center point coordinate of a group of pointers.\n * @param {Object} pointers - The target pointers.\n * @returns {Object} The center point coordinate.\n */\nexport function getPointersCenter(pointers) {\n  let pageX = 0;\n  let pageY = 0;\n  let count = 0;\n\n  forEach(pointers, ({ startX, startY }) => {\n    pageX += startX;\n    pageY += startY;\n    count += 1;\n  });\n\n  pageX /= count;\n  pageY /= count;\n\n  return {\n    pageX,\n    pageY,\n  };\n}\n","import {\n  CLASS_LOADING,\n  CLASS_TRANSITION,\n  EVENT_LOAD,\n  EVENT_TRANSITION_END,\n  EVENT_VIEWED,\n} from './constants';\nimport {\n  addClass,\n  addListener,\n  assign,\n  forEach,\n  getImageNameFromURL,\n  getImageNaturalSizes,\n  getTransforms,\n  isFunction,\n  isString,\n  removeClass,\n  removeListener,\n  setData,\n  setStyle,\n} from './utilities';\n\nexport default {\n  render() {\n    this.initContainer();\n    this.initViewer();\n    this.initList();\n    this.renderViewer();\n  },\n\n  initContainer() {\n    this.containerData = {\n      width: window.innerWidth,\n      height: window.innerHeight,\n    };\n  },\n\n  initViewer() {\n    const { options, parent } = this;\n    let viewerData;\n\n    if (options.inline) {\n      viewerData = {\n        width: Math.max(parent.offsetWidth, options.minWidth),\n        height: Math.max(parent.offsetHeight, options.minHeight),\n      };\n\n      this.parentData = viewerData;\n    }\n\n    if (this.fulled || !viewerData) {\n      viewerData = this.containerData;\n    }\n\n    this.viewerData = assign({}, viewerData);\n  },\n\n  renderViewer() {\n    if (this.options.inline && !this.fulled) {\n      setStyle(this.viewer, this.viewerData);\n    }\n  },\n\n  initList() {\n    const { element, options, list } = this;\n    const items = [];\n\n    forEach(this.images, (image, i) => {\n      const { src } = image;\n      const alt = image.alt || getImageNameFromURL(src);\n      let { url } = options;\n\n      if (isString(url)) {\n        url = image.getAttribute(url);\n      } else if (isFunction(url)) {\n        url = url.call(this, image);\n      }\n\n      if (src || url) {\n        items.push('<li>' +\n          '<img' +\n            ` src=\"${src || url}\"` +\n            ' role=\"button\"' +\n            ' data-viewer-action=\"view\"' +\n            ` data-index=\"${i}\"` +\n            ` data-original-url=\"${url || src}\"` +\n            ` alt=\"${alt}\"` +\n          '>' +\n        '</li>');\n      }\n    });\n\n    list.innerHTML = items.join('');\n    this.items = list.getElementsByTagName('li');\n    forEach(this.items, (item) => {\n      const image = item.firstElementChild;\n\n      setData(image, 'filled', true);\n\n      if (options.loading) {\n        addClass(item, CLASS_LOADING);\n      }\n\n      addListener(image, EVENT_LOAD, (event) => {\n        if (options.loading) {\n          removeClass(item, CLASS_LOADING);\n        }\n\n        this.loadImage(event);\n      }, {\n        once: true,\n      });\n    });\n\n    if (options.transition) {\n      addListener(element, EVENT_VIEWED, () => {\n        addClass(list, CLASS_TRANSITION);\n      }, {\n        once: true,\n      });\n    }\n  },\n\n  renderList(index) {\n    const i = index || this.index;\n    const width = this.items[i].offsetWidth || 30;\n    const outerWidth = width + 1; // 1 pixel of `margin-left` width\n\n    // Place the active item in the center of the screen\n    setStyle(this.list, assign({\n      width: outerWidth * this.length,\n    }, getTransforms({\n      translateX: ((this.viewerData.width - width) / 2) - (outerWidth * i),\n    })));\n  },\n\n  resetList() {\n    const { list } = this;\n\n    list.innerHTML = '';\n    removeClass(list, CLASS_TRANSITION);\n    setStyle(list, getTransforms({\n      translateX: 0,\n    }));\n  },\n\n  initImage(done) {\n    const { options, image, viewerData } = this;\n    const footerHeight = this.footer.offsetHeight;\n    const viewerWidth = viewerData.width;\n    const viewerHeight = Math.max(viewerData.height - footerHeight, footerHeight);\n    const oldImageData = this.imageData || {};\n    let sizingImage;\n\n    this.imageInitializing = {\n      abort() {\n        sizingImage.onload = null;\n      },\n    };\n\n    sizingImage = getImageNaturalSizes(image, (naturalWidth, naturalHeight) => {\n      const aspectRatio = naturalWidth / naturalHeight;\n      let width = viewerWidth;\n      let height = viewerHeight;\n\n      this.imageInitializing = false;\n\n      if (viewerHeight * aspectRatio > viewerWidth) {\n        height = viewerWidth / aspectRatio;\n      } else {\n        width = viewerHeight * aspectRatio;\n      }\n\n      width = Math.min(width * 0.9, naturalWidth);\n      height = Math.min(height * 0.9, naturalHeight);\n\n      const imageData = {\n        naturalWidth,\n        naturalHeight,\n        aspectRatio,\n        ratio: width / naturalWidth,\n        width,\n        height,\n        left: (viewerWidth - width) / 2,\n        top: (viewerHeight - height) / 2,\n      };\n      const initialImageData = assign({}, imageData);\n\n      if (options.rotatable) {\n        imageData.rotate = oldImageData.rotate || 0;\n        initialImageData.rotate = 0;\n      }\n\n      if (options.scalable) {\n        imageData.scaleX = oldImageData.scaleX || 1;\n        imageData.scaleY = oldImageData.scaleY || 1;\n        initialImageData.scaleX = 1;\n        initialImageData.scaleY = 1;\n      }\n\n      this.imageData = imageData;\n      this.initialImageData = initialImageData;\n\n      if (done) {\n        done();\n      }\n    });\n  },\n\n  renderImage(done) {\n    const { image, imageData } = this;\n\n    setStyle(image, assign({\n      width: imageData.width,\n      height: imageData.height,\n      marginLeft: imageData.left,\n      marginTop: imageData.top,\n    }, getTransforms(imageData)));\n\n    if (done) {\n      if ((this.viewing || this.zooming) && this.options.transition) {\n        const onTransitionEnd = () => {\n          this.imageRendering = false;\n          done();\n        };\n\n        this.imageRendering = {\n          abort() {\n            removeListener(image, EVENT_TRANSITION_END, onTransitionEnd);\n          },\n        };\n\n        addListener(image, EVENT_TRANSITION_END, onTransitionEnd, {\n          once: true,\n        });\n      } else {\n        done();\n      }\n    }\n  },\n\n  resetImage() {\n    // this.image only defined after viewed\n    if (this.viewing || this.viewed) {\n      const { image } = this;\n\n      if (this.viewing) {\n        this.viewing.abort();\n      }\n\n      image.parentNode.removeChild(image);\n      this.image = null;\n    }\n  },\n};\n","import {\n  EVENT_CLICK,\n  EVENT_DRAG_START,\n  EVENT_KEY_DOWN,\n  EVENT_POINTER_DOWN,\n  EVENT_POINTER_MOVE,\n  EVENT_POINTER_UP,\n  EVENT_RESIZE,\n  EVENT_WHEEL,\n} from './constants';\nimport {\n  addListener,\n  removeListener,\n} from './utilities';\n\nexport default {\n  bind() {\n    const { element, viewer } = this;\n\n    addListener(viewer, EVENT_CLICK, (this.onClick = this.click.bind(this)));\n    addListener(viewer, EVENT_WHEEL, (this.onWheel = this.wheel.bind(this)));\n    addListener(viewer, EVENT_DRAG_START, (this.onDragStart = this.dragstart.bind(this)));\n    addListener(\n      this.canvas,\n      EVENT_POINTER_DOWN,\n      (this.onPointerDown = this.pointerdown.bind(this)),\n    );\n    addListener(\n      element.ownerDocument,\n      EVENT_POINTER_MOVE,\n      (this.onPointerMove = this.pointermove.bind(this)),\n    );\n    addListener(\n      element.ownerDocument,\n      EVENT_POINTER_UP,\n      (this.onPointerUp = this.pointerup.bind(this)),\n    );\n    addListener(\n      element.ownerDocument,\n      EVENT_KEY_DOWN,\n      (this.onKeyDown = this.keydown.bind(this)),\n    );\n    addListener(window, EVENT_RESIZE, (this.onResize = this.resize.bind(this)));\n  },\n\n  unbind() {\n    const { element, viewer } = this;\n\n    removeListener(viewer, EVENT_CLICK, this.onClick);\n    removeListener(viewer, EVENT_WHEEL, this.onWheel);\n    removeListener(viewer, EVENT_DRAG_START, this.onDragStart);\n    removeListener(this.canvas, EVENT_POINTER_DOWN, this.onPointerDown);\n    removeListener(element.ownerDocument, EVENT_POINTER_MOVE, this.onPointerMove);\n    removeListener(element.ownerDocument, EVENT_POINTER_UP, this.onPointerUp);\n    removeListener(element.ownerDocument, EVENT_KEY_DOWN, this.onKeyDown);\n    removeListener(window, EVENT_RESIZE, this.onResize);\n  },\n};\n","import {\n  ACTION_MOVE,\n  ACTION_SWITCH,\n  ACTION_ZOOM,\n  CLASS_INVISIBLE,\n  CLASS_LOADING,\n  CLASS_MOVE,\n  CLASS_TRANSITION,\n  DATA_ACTION,\n  EVENT_LOAD,\n  EVENT_VIEWED,\n} from './constants';\nimport {\n  addClass,\n  addListener,\n  assign,\n  dispatchEvent,\n  forEach,\n  getData,\n  getImageNaturalSizes,\n  getPointer,\n  getTransforms,\n  isFunction,\n  removeClass,\n  setStyle,\n  toggleClass,\n} from './utilities';\n\nexport default {\n  click({ target }) {\n    const { options, imageData } = this;\n    const action = getData(target, DATA_ACTION);\n\n    switch (action) {\n      case 'mix':\n        if (this.played) {\n          this.stop();\n        } else if (options.inline) {\n          if (this.fulled) {\n            this.exit();\n          } else {\n            this.full();\n          }\n        } else {\n          this.hide();\n        }\n\n        break;\n\n      case 'hide':\n        this.hide();\n        break;\n\n      case 'view':\n        this.view(getData(target, 'index'));\n        break;\n\n      case 'zoom-in':\n        this.zoom(0.1, true);\n        break;\n\n      case 'zoom-out':\n        this.zoom(-0.1, true);\n        break;\n\n      case 'one-to-one':\n        this.toggle();\n        break;\n\n      case 'reset':\n        this.reset();\n        break;\n\n      case 'prev':\n        this.prev(options.loop);\n        break;\n\n      case 'play':\n        this.play(options.fullscreen);\n        break;\n\n      case 'next':\n        this.next(options.loop);\n        break;\n\n      case 'rotate-left':\n        this.rotate(-90);\n        break;\n\n      case 'rotate-right':\n        this.rotate(90);\n        break;\n\n      case 'flip-horizontal':\n        this.scaleX(-imageData.scaleX || -1);\n        break;\n\n      case 'flip-vertical':\n        this.scaleY(-imageData.scaleY || -1);\n        break;\n\n      default:\n        if (this.played) {\n          this.stop();\n        }\n    }\n  },\n\n  load() {\n    if (this.timeout) {\n      clearTimeout(this.timeout);\n      this.timeout = false;\n    }\n\n    const {\n      element,\n      options,\n      image,\n      index,\n      viewerData,\n    } = this;\n\n    removeClass(image, CLASS_INVISIBLE);\n\n    if (options.loading) {\n      removeClass(this.canvas, CLASS_LOADING);\n    }\n\n    image.style.cssText = (\n      'height:0;' +\n      `margin-left:${viewerData.width / 2}px;` +\n      `margin-top:${viewerData.height / 2}px;` +\n      'max-width:none!important;' +\n      'position:absolute;' +\n      'width:0;'\n    );\n\n    this.initImage(() => {\n      toggleClass(image, CLASS_MOVE, options.movable);\n      toggleClass(image, CLASS_TRANSITION, options.transition);\n\n      this.renderImage(() => {\n        this.viewed = true;\n        this.viewing = false;\n\n        if (isFunction(options.viewed)) {\n          addListener(element, EVENT_VIEWED, options.viewed, {\n            once: true,\n          });\n        }\n\n        dispatchEvent(element, EVENT_VIEWED, {\n          originalImage: this.images[index],\n          index,\n          image,\n        });\n      });\n    });\n  },\n\n  loadImage(e) {\n    const image = e.target;\n    const parent = image.parentNode;\n    const parentWidth = parent.offsetWidth || 30;\n    const parentHeight = parent.offsetHeight || 50;\n    const filled = !!getData(image, 'filled');\n\n    getImageNaturalSizes(image, (naturalWidth, naturalHeight) => {\n      const aspectRatio = naturalWidth / naturalHeight;\n      let width = parentWidth;\n      let height = parentHeight;\n\n      if (parentHeight * aspectRatio > parentWidth) {\n        if (filled) {\n          width = parentHeight * aspectRatio;\n        } else {\n          height = parentWidth / aspectRatio;\n        }\n      } else if (filled) {\n        height = parentWidth / aspectRatio;\n      } else {\n        width = parentHeight * aspectRatio;\n      }\n\n      setStyle(image, assign({\n        width,\n        height,\n      }, getTransforms({\n        translateX: (parentWidth - width) / 2,\n        translateY: (parentHeight - height) / 2,\n      })));\n    });\n  },\n\n  keydown(e) {\n    const { options } = this;\n\n    if (!this.fulled || !options.keyboard) {\n      return;\n    }\n\n    switch (e.keyCode || e.which || e.charCode) {\n      // Escape\n      case 27:\n        if (this.played) {\n          this.stop();\n        } else if (options.inline) {\n          if (this.fulled) {\n            this.exit();\n          }\n        } else {\n          this.hide();\n        }\n\n        break;\n\n      // Space\n      case 32:\n        if (this.played) {\n          this.stop();\n        }\n\n        break;\n\n      // ArrowLeft\n      case 37:\n        this.prev(options.loop);\n        break;\n\n      // ArrowUp\n      case 38:\n        // Prevent scroll on Firefox\n        e.preventDefault();\n\n        // Zoom in\n        this.zoom(options.zoomRatio, true);\n        break;\n\n      // ArrowRight\n      case 39:\n        this.next(options.loop);\n        break;\n\n      // ArrowDown\n      case 40:\n        // Prevent scroll on Firefox\n        e.preventDefault();\n\n        // Zoom out\n        this.zoom(-options.zoomRatio, true);\n        break;\n\n      // Ctrl + 0\n      case 48:\n        // Fall through\n\n      // Ctrl + 1\n      // eslint-disable-next-line no-fallthrough\n      case 49:\n        if (e.ctrlKey) {\n          e.preventDefault();\n          this.toggle();\n        }\n\n        break;\n\n      default:\n    }\n  },\n\n  dragstart(e) {\n    if (e.target.tagName.toLowerCase() === 'img') {\n      e.preventDefault();\n    }\n  },\n\n  pointerdown(e) {\n    const { options, pointers } = this;\n\n    if (!this.viewed || this.showing || this.viewing || this.hiding) {\n      return;\n    }\n\n    // This line is required for preventing page zooming in iOS browsers\n    e.preventDefault();\n\n    if (e.changedTouches) {\n      forEach(e.changedTouches, (touch) => {\n        pointers[touch.identifier] = getPointer(touch);\n      });\n    } else {\n      pointers[e.pointerId || 0] = getPointer(e);\n    }\n\n    let action = options.movable ? ACTION_MOVE : false;\n\n    if (Object.keys(pointers).length > 1) {\n      action = ACTION_ZOOM;\n    } else if ((e.pointerType === 'touch' || e.type === 'touchstart') && this.isSwitchable()) {\n      action = ACTION_SWITCH;\n    }\n\n    if (options.transition && (action === ACTION_MOVE || action === ACTION_ZOOM)) {\n      removeClass(this.image, CLASS_TRANSITION);\n    }\n\n    this.action = action;\n  },\n\n  pointermove(e) {\n    const {\n      pointers,\n      action,\n    } = this;\n\n    if (!this.viewed || !action) {\n      return;\n    }\n\n    e.preventDefault();\n\n    if (e.changedTouches) {\n      forEach(e.changedTouches, (touch) => {\n        assign(pointers[touch.identifier], getPointer(touch, true));\n      });\n    } else {\n      assign(pointers[e.pointerId || 0], getPointer(e, true));\n    }\n\n    this.change(e);\n  },\n\n  pointerup(e) {\n    const { action, pointers } = this;\n\n    if (e.changedTouches) {\n      forEach(e.changedTouches, (touch) => {\n        delete pointers[touch.identifier];\n      });\n    } else {\n      delete pointers[e.pointerId || 0];\n    }\n\n    if (!action) {\n      return;\n    }\n\n    e.preventDefault();\n\n    if (this.options.transition && (action === ACTION_MOVE || action === ACTION_ZOOM)) {\n      addClass(this.image, CLASS_TRANSITION);\n    }\n\n    this.action = false;\n  },\n\n  resize() {\n    if (!this.isShown || this.hiding) {\n      return;\n    }\n\n    this.initContainer();\n    this.initViewer();\n    this.renderViewer();\n    this.renderList();\n\n    if (this.viewed) {\n      this.initImage(() => {\n        this.renderImage();\n      });\n    }\n\n    if (this.played) {\n      if (this.options.fullscreen && this.fulled &&\n        !document.fullscreenElement &&\n        !document.mozFullScreenElement &&\n        !document.webkitFullscreenElement &&\n        !document.msFullscreenElement) {\n        this.stop();\n        return;\n      }\n\n      forEach(this.player.getElementsByTagName('img'), (image) => {\n        addListener(image, EVENT_LOAD, this.loadImage.bind(this), {\n          once: true,\n        });\n        dispatchEvent(image, EVENT_LOAD);\n      });\n    }\n  },\n\n  wheel(e) {\n    if (!this.viewed) {\n      return;\n    }\n\n    e.preventDefault();\n\n    // Limit wheel speed to prevent zoom too fast\n    if (this.wheeling) {\n      return;\n    }\n\n    this.wheeling = true;\n\n    setTimeout(() => {\n      this.wheeling = false;\n    }, 50);\n\n    const ratio = Number(this.options.zoomRatio) || 0.1;\n    let delta = 1;\n\n    if (e.deltaY) {\n      delta = e.deltaY > 0 ? 1 : -1;\n    } else if (e.wheelDelta) {\n      delta = -e.wheelDelta / 120;\n    } else if (e.detail) {\n      delta = e.detail > 0 ? 1 : -1;\n    }\n\n    this.zoom(-delta * ratio, true, e);\n  },\n};\n","import {\n  CLASS_ACTIVE,\n  CLASS_FADE,\n  CLASS_FIXED,\n  CLASS_FULLSCREEN_EXIT,\n  CLASS_HIDE,\n  CLASS_IN,\n  CLASS_INVISIBLE,\n  CLASS_LOADING,\n  CLASS_SHOW,\n  CLASS_TRANSITION,\n  EVENT_CLICK,\n  EVENT_HIDE,\n  EVENT_LOAD,\n  EVENT_SHOW,\n  EVENT_TRANSITION_END,\n  EVENT_VIEW,\n  EVENT_VIEWED,\n  EVENT_ZOOM,\n  EVENT_ZOOMED,\n  NAMESPACE,\n} from './constants';\nimport {\n  addClass,\n  addListener,\n  assign,\n  dispatchEvent,\n  forEach,\n  getData,\n  getOffset,\n  getPointersCenter,\n  hasClass,\n  isFunction,\n  isNumber,\n  isUndefined,\n  removeClass,\n  removeData,\n  removeListener,\n  setStyle,\n  toggleClass,\n} from './utilities';\n\nexport default {\n  /** Show the viewer (only available in modal mode)\n   * @param {boolean} [immediate=false] - Indicates if show the viewer immediately or not.\n   * @returns {Viewer} this\n   */\n  show(immediate = false) {\n    const { element, options } = this;\n\n    if (options.inline || this.showing || this.isShown || this.showing) {\n      return this;\n    }\n\n    if (!this.ready) {\n      this.build();\n\n      if (this.ready) {\n        this.show(immediate);\n      }\n\n      return this;\n    }\n\n    if (isFunction(options.show)) {\n      addListener(element, EVENT_SHOW, options.show, {\n        once: true,\n      });\n    }\n\n    if (dispatchEvent(element, EVENT_SHOW) === false || !this.ready) {\n      return this;\n    }\n\n    if (this.hiding) {\n      this.transitioning.abort();\n    }\n\n    this.showing = true;\n    this.open();\n\n    const { viewer } = this;\n\n    removeClass(viewer, CLASS_HIDE);\n\n    if (options.transition && !immediate) {\n      const shown = this.shown.bind(this);\n\n      this.transitioning = {\n        abort() {\n          removeListener(viewer, EVENT_TRANSITION_END, shown);\n          removeClass(viewer, CLASS_IN);\n        },\n      };\n\n      addClass(viewer, CLASS_TRANSITION);\n\n      // Force reflow to enable CSS3 transition\n      // eslint-disable-next-line\n      viewer.offsetWidth;\n      addListener(viewer, EVENT_TRANSITION_END, shown, {\n        once: true,\n      });\n      addClass(viewer, CLASS_IN);\n    } else {\n      addClass(viewer, CLASS_IN);\n      this.shown();\n    }\n\n    return this;\n  },\n\n  /**\n   * Hide the viewer (only available in modal mode)\n   * @param {boolean} [immediate=false] - Indicates if hide the viewer immediately or not.\n   * @returns {Viewer} this\n   */\n  hide(immediate = false) {\n    const { element, options } = this;\n\n    if (options.inline || this.hiding || !(this.isShown || this.showing)) {\n      return this;\n    }\n\n    if (isFunction(options.hide)) {\n      addListener(element, EVENT_HIDE, options.hide, {\n        once: true,\n      });\n    }\n\n    if (dispatchEvent(element, EVENT_HIDE) === false) {\n      return this;\n    }\n\n    if (this.showing) {\n      this.transitioning.abort();\n    }\n\n    this.hiding = true;\n\n    if (this.played) {\n      this.stop();\n    } else if (this.viewing) {\n      this.viewing.abort();\n    }\n\n    const { viewer } = this;\n\n    if (options.transition && !immediate) {\n      const hidden = this.hidden.bind(this);\n      const hide = () => {\n        addListener(viewer, EVENT_TRANSITION_END, hidden, {\n          once: true,\n        });\n        removeClass(viewer, CLASS_IN);\n      };\n\n      this.transitioning = {\n        abort() {\n          if (this.viewed) {\n            removeListener(this.image, EVENT_TRANSITION_END, hide);\n          } else {\n            removeListener(viewer, EVENT_TRANSITION_END, hidden);\n          }\n        },\n      };\n\n      if (this.viewed) {\n        addListener(this.image, EVENT_TRANSITION_END, hide, {\n          once: true,\n        });\n        this.zoomTo(0, false, false, true);\n      } else {\n        hide();\n      }\n    } else {\n      removeClass(viewer, CLASS_IN);\n      this.hidden();\n    }\n\n    return this;\n  },\n\n  /**\n   * View one of the images with image's index\n   * @param {number} index - The index of the image to view.\n   * @returns {Viewer} this\n   */\n  view(index = 0) {\n    index = Number(index) || 0;\n\n    if (!this.isShown) {\n      this.index = index;\n      return this.show();\n    }\n\n    if (this.hiding || this.played || index < 0 || index >= this.length ||\n      (this.viewed && index === this.index)) {\n      return this;\n    }\n\n    if (this.viewing) {\n      this.viewing.abort();\n    }\n\n    const {\n      element,\n      options,\n      title,\n      canvas,\n    } = this;\n    const item = this.items[index];\n    const img = item.querySelector('img');\n    const url = getData(img, 'originalUrl');\n    const alt = img.getAttribute('alt');\n    const image = document.createElement('img');\n\n    image.src = url;\n    image.alt = alt;\n\n    if (isFunction(options.view)) {\n      addListener(element, EVENT_VIEW, options.view, {\n        once: true,\n      });\n    }\n\n    if (dispatchEvent(element, EVENT_VIEW, {\n      originalImage: this.images[index],\n      index,\n      image,\n    }) === false || !this.isShown || this.hiding || this.played) {\n      return this;\n    }\n\n    this.image = image;\n    removeClass(this.items[this.index], CLASS_ACTIVE);\n    addClass(item, CLASS_ACTIVE);\n    this.viewed = false;\n    this.index = index;\n    this.imageData = {};\n    addClass(image, CLASS_INVISIBLE);\n\n    if (options.loading) {\n      addClass(canvas, CLASS_LOADING);\n    }\n\n    canvas.innerHTML = '';\n    canvas.appendChild(image);\n\n    // Center current item\n    this.renderList();\n\n    // Clear title\n    title.innerHTML = '';\n\n    // Generate title after viewed\n    const onViewed = () => {\n      const { imageData } = this;\n\n      title.textContent = `${alt} (${imageData.naturalWidth} × ${imageData.naturalHeight})`;\n    };\n    let onLoad;\n\n    addListener(element, EVENT_VIEWED, onViewed, {\n      once: true,\n    });\n\n    this.viewing = {\n      abort() {\n        removeListener(element, EVENT_VIEWED, onViewed);\n\n        if (image.complete) {\n          if (this.imageRendering) {\n            this.imageRendering.abort();\n          } else if (this.imageInitializing) {\n            this.imageInitializing.abort();\n          }\n        } else {\n          removeListener(image, EVENT_LOAD, onLoad);\n\n          if (this.timeout) {\n            clearTimeout(this.timeout);\n          }\n        }\n      },\n    };\n\n    if (image.complete) {\n      this.load();\n    } else {\n      addListener(image, EVENT_LOAD, onLoad = this.load.bind(this), {\n        once: true,\n      });\n\n      if (this.timeout) {\n        clearTimeout(this.timeout);\n      }\n\n      // Make the image visible if it fails to load within 1s\n      this.timeout = setTimeout(() => {\n        removeClass(image, CLASS_INVISIBLE);\n        this.timeout = false;\n      }, 1000);\n    }\n\n    return this;\n  },\n\n  /**\n   * View the previous image\n   * @param {boolean} [loop=false] - Indicate if view the last one\n   * when it is the first one at present.\n   * @returns {Viewer} this\n   */\n  prev(loop = false) {\n    let index = this.index - 1;\n\n    if (index < 0) {\n      index = loop ? this.length - 1 : 0;\n    }\n\n    this.view(index);\n    return this;\n  },\n\n  /**\n   * View the next image\n   * @param {boolean} [loop=false] - Indicate if view the first one\n   * when it is the last one at present.\n   * @returns {Viewer} this\n   */\n  next(loop = false) {\n    const maxIndex = this.length - 1;\n    let index = this.index + 1;\n\n    if (index > maxIndex) {\n      index = loop ? 0 : maxIndex;\n    }\n\n    this.view(index);\n    return this;\n  },\n\n  /**\n   * Move the image with relative offsets.\n   * @param {number} offsetX - The relative offset distance on the x-axis.\n   * @param {number} offsetY - The relative offset distance on the y-axis.\n   * @returns {Viewer} this\n   */\n  move(offsetX, offsetY) {\n    const { imageData } = this;\n\n    this.moveTo(\n      isUndefined(offsetX) ? offsetX : imageData.left + Number(offsetX),\n      isUndefined(offsetY) ? offsetY : imageData.top + Number(offsetY),\n    );\n\n    return this;\n  },\n\n  /**\n   * Move the image to an absolute point.\n   * @param {number} x - The x-axis coordinate.\n   * @param {number} [y=x] - The y-axis coordinate.\n   * @returns {Viewer} this\n   */\n  moveTo(x, y = x) {\n    const { imageData } = this;\n\n    x = Number(x);\n    y = Number(y);\n\n    if (this.viewed && !this.played && this.options.movable) {\n      let changed = false;\n\n      if (isNumber(x)) {\n        imageData.left = x;\n        changed = true;\n      }\n\n      if (isNumber(y)) {\n        imageData.top = y;\n        changed = true;\n      }\n\n      if (changed) {\n        this.renderImage();\n      }\n    }\n\n    return this;\n  },\n\n  /**\n   * Zoom the image with a relative ratio.\n   * @param {number} ratio - The target ratio.\n   * @param {boolean} [hasTooltip=false] - Indicates if it has a tooltip or not.\n   * @param {Event} [_originalEvent=null] - The original event if any.\n   * @returns {Viewer} this\n   */\n  zoom(ratio, hasTooltip = false, _originalEvent = null) {\n    const { imageData } = this;\n\n    ratio = Number(ratio);\n\n    if (ratio < 0) {\n      ratio = 1 / (1 - ratio);\n    } else {\n      ratio = 1 + ratio;\n    }\n\n    this.zoomTo((imageData.width * ratio) / imageData.naturalWidth, hasTooltip, _originalEvent);\n\n    return this;\n  },\n\n  /**\n   * Zoom the image to an absolute ratio.\n   * @param {number} ratio - The target ratio.\n   * @param {boolean} [hasTooltip=false] - Indicates if it has a tooltip or not.\n   * @param {Event} [_originalEvent=null] - The original event if any.\n   * @param {Event} [_zoomable=false] - Indicates if the current zoom is available or not.\n   * @returns {Viewer} this\n   */\n  zoomTo(ratio, hasTooltip = false, _originalEvent = null, _zoomable = false) {\n    const {\n      element,\n      options,\n      pointers,\n      imageData,\n    } = this;\n\n    ratio = Math.max(0, ratio);\n\n    if (isNumber(ratio) && this.viewed && !this.played && (_zoomable || options.zoomable)) {\n      if (!_zoomable) {\n        const minZoomRatio = Math.max(0.01, options.minZoomRatio);\n        const maxZoomRatio = Math.min(100, options.maxZoomRatio);\n\n        ratio = Math.min(Math.max(ratio, minZoomRatio), maxZoomRatio);\n      }\n\n      if (_originalEvent && ratio > 0.95 && ratio < 1.05) {\n        ratio = 1;\n      }\n\n      const newWidth = imageData.naturalWidth * ratio;\n      const newHeight = imageData.naturalHeight * ratio;\n      const oldRatio = imageData.width / imageData.naturalWidth;\n\n      if (isFunction(options.zoom)) {\n        addListener(element, EVENT_ZOOM, options.zoom, {\n          once: true,\n        });\n      }\n\n      if (dispatchEvent(element, EVENT_ZOOM, {\n        ratio,\n        oldRatio,\n        originalEvent: _originalEvent,\n      }) === false) {\n        return this;\n      }\n\n      this.zooming = true;\n\n      if (_originalEvent) {\n        const offset = getOffset(this.viewer);\n        const center = pointers && Object.keys(pointers).length ? getPointersCenter(pointers) : {\n          pageX: _originalEvent.pageX,\n          pageY: _originalEvent.pageY,\n        };\n\n        // Zoom from the triggering point of the event\n        imageData.left -= (newWidth - imageData.width) * (\n          ((center.pageX - offset.left) - imageData.left) / imageData.width\n        );\n        imageData.top -= (newHeight - imageData.height) * (\n          ((center.pageY - offset.top) - imageData.top) / imageData.height\n        );\n      } else {\n        // Zoom from the center of the image\n        imageData.left -= (newWidth - imageData.width) / 2;\n        imageData.top -= (newHeight - imageData.height) / 2;\n      }\n\n      imageData.width = newWidth;\n      imageData.height = newHeight;\n      imageData.ratio = ratio;\n      this.renderImage(() => {\n        this.zooming = false;\n\n        if (isFunction(options.zoomed)) {\n          addListener(element, EVENT_ZOOMED, options.zoomed, {\n            once: true,\n          });\n        }\n\n        dispatchEvent(element, EVENT_ZOOMED, {\n          ratio,\n          oldRatio,\n          originalEvent: _originalEvent,\n        });\n      });\n\n      if (hasTooltip) {\n        this.tooltip();\n      }\n    }\n\n    return this;\n  },\n\n  /**\n   * Rotate the image with a relative degree.\n   * @param {number} degree - The rotate degree.\n   * @returns {Viewer} this\n   */\n  rotate(degree) {\n    this.rotateTo((this.imageData.rotate || 0) + Number(degree));\n\n    return this;\n  },\n\n  /**\n   * Rotate the image to an absolute degree.\n   * @param {number} degree - The rotate degree.\n   * @returns {Viewer} this\n   */\n  rotateTo(degree) {\n    const { imageData } = this;\n\n    degree = Number(degree);\n\n    if (isNumber(degree) && this.viewed && !this.played && this.options.rotatable) {\n      imageData.rotate = degree;\n      this.renderImage();\n    }\n\n    return this;\n  },\n\n  /**\n   * Scale the image on the x-axis.\n   * @param {number} scaleX - The scale ratio on the x-axis.\n   * @returns {Viewer} this\n   */\n  scaleX(scaleX) {\n    this.scale(scaleX, this.imageData.scaleY);\n\n    return this;\n  },\n\n  /**\n   * Scale the image on the y-axis.\n   * @param {number} scaleY - The scale ratio on the y-axis.\n   * @returns {Viewer} this\n   */\n  scaleY(scaleY) {\n    this.scale(this.imageData.scaleX, scaleY);\n\n    return this;\n  },\n\n  /**\n   * Scale the image.\n   * @param {number} scaleX - The scale ratio on the x-axis.\n   * @param {number} [scaleY=scaleX] - The scale ratio on the y-axis.\n   * @returns {Viewer} this\n   */\n  scale(scaleX, scaleY = scaleX) {\n    const { imageData } = this;\n\n    scaleX = Number(scaleX);\n    scaleY = Number(scaleY);\n\n    if (this.viewed && !this.played && this.options.scalable) {\n      let changed = false;\n\n      if (isNumber(scaleX)) {\n        imageData.scaleX = scaleX;\n        changed = true;\n      }\n\n      if (isNumber(scaleY)) {\n        imageData.scaleY = scaleY;\n        changed = true;\n      }\n\n      if (changed) {\n        this.renderImage();\n      }\n    }\n\n    return this;\n  },\n\n  /**\n   * Play the images\n   * @param {boolean} [fullscreen=false] - Indicate if request fullscreen or not.\n   * @returns {Viewer} this\n   */\n  play(fullscreen = false) {\n    if (!this.isShown || this.played) {\n      return this;\n    }\n\n    const { options, player } = this;\n    const onLoad = this.loadImage.bind(this);\n    const list = [];\n    let total = 0;\n    let index = 0;\n\n    this.played = true;\n    this.onLoadWhenPlay = onLoad;\n\n    if (fullscreen) {\n      this.requestFullscreen();\n    }\n\n    addClass(player, CLASS_SHOW);\n    forEach(this.items, (item, i) => {\n      const img = item.querySelector('img');\n      const image = document.createElement('img');\n\n      image.src = getData(img, 'originalUrl');\n      image.alt = img.getAttribute('alt');\n      total += 1;\n      addClass(image, CLASS_FADE);\n      toggleClass(image, CLASS_TRANSITION, options.transition);\n\n      if (hasClass(item, CLASS_ACTIVE)) {\n        addClass(image, CLASS_IN);\n        index = i;\n      }\n\n      list.push(image);\n      addListener(image, EVENT_LOAD, onLoad, {\n        once: true,\n      });\n      player.appendChild(image);\n    });\n\n    if (isNumber(options.interval) && options.interval > 0) {\n      const play = () => {\n        this.playing = setTimeout(() => {\n          removeClass(list[index], CLASS_IN);\n          index += 1;\n          index = index < total ? index : 0;\n          addClass(list[index], CLASS_IN);\n          play();\n        }, options.interval);\n      };\n\n      if (total > 1) {\n        play();\n      }\n    }\n\n    return this;\n  },\n\n  // Stop play\n  stop() {\n    if (!this.played) {\n      return this;\n    }\n\n    const { player } = this;\n\n    this.played = false;\n    clearTimeout(this.playing);\n    forEach(player.getElementsByTagName('img'), (image) => {\n      removeListener(image, EVENT_LOAD, this.onLoadWhenPlay);\n    });\n    removeClass(player, CLASS_SHOW);\n    player.innerHTML = '';\n    this.exitFullscreen();\n\n    return this;\n  },\n\n  // Enter modal mode (only available in inline mode)\n  full() {\n    const {\n      options,\n      viewer,\n      image,\n      list,\n    } = this;\n\n    if (!this.isShown || this.played || this.fulled || !options.inline) {\n      return this;\n    }\n\n    this.fulled = true;\n    this.open();\n    addClass(this.button, CLASS_FULLSCREEN_EXIT);\n\n    if (options.transition) {\n      removeClass(list, CLASS_TRANSITION);\n\n      if (this.viewed) {\n        removeClass(image, CLASS_TRANSITION);\n      }\n    }\n\n    addClass(viewer, CLASS_FIXED);\n    viewer.setAttribute('style', '');\n    setStyle(viewer, {\n      zIndex: options.zIndex,\n    });\n\n    this.initContainer();\n    this.viewerData = assign({}, this.containerData);\n    this.renderList();\n\n    if (this.viewed) {\n      this.initImage(() => {\n        this.renderImage(() => {\n          if (options.transition) {\n            setTimeout(() => {\n              addClass(image, CLASS_TRANSITION);\n              addClass(list, CLASS_TRANSITION);\n            }, 0);\n          }\n        });\n      });\n    }\n\n    return this;\n  },\n\n  // Exit modal mode (only available in inline mode)\n  exit() {\n    const {\n      options,\n      viewer,\n      image,\n      list,\n    } = this;\n\n    if (!this.isShown || this.played || !this.fulled || !options.inline) {\n      return this;\n    }\n\n    this.fulled = false;\n    this.close();\n    removeClass(this.button, CLASS_FULLSCREEN_EXIT);\n\n    if (options.transition) {\n      removeClass(list, CLASS_TRANSITION);\n\n      if (this.viewed) {\n        removeClass(image, CLASS_TRANSITION);\n      }\n    }\n\n    removeClass(viewer, CLASS_FIXED);\n    setStyle(viewer, {\n      zIndex: options.zIndexInline,\n    });\n\n    this.viewerData = assign({}, this.parentData);\n    this.renderViewer();\n    this.renderList();\n\n    if (this.viewed) {\n      this.initImage(() => {\n        this.renderImage(() => {\n          if (options.transition) {\n            setTimeout(() => {\n              addClass(image, CLASS_TRANSITION);\n              addClass(list, CLASS_TRANSITION);\n            }, 0);\n          }\n        });\n      });\n    }\n\n    return this;\n  },\n\n  // Show the current ratio of the image with percentage\n  tooltip() {\n    const { options, tooltipBox, imageData } = this;\n\n    if (!this.viewed || this.played || !options.tooltip) {\n      return this;\n    }\n\n    tooltipBox.textContent = `${Math.round(imageData.ratio * 100)}%`;\n\n    if (!this.tooltipping) {\n      if (options.transition) {\n        if (this.fading) {\n          dispatchEvent(tooltipBox, EVENT_TRANSITION_END);\n        }\n\n        addClass(tooltipBox, CLASS_SHOW);\n        addClass(tooltipBox, CLASS_FADE);\n        addClass(tooltipBox, CLASS_TRANSITION);\n\n        // Force reflow to enable CSS3 transition\n        // eslint-disable-next-line\n        tooltipBox.offsetWidth;\n        addClass(tooltipBox, CLASS_IN);\n      } else {\n        addClass(tooltipBox, CLASS_SHOW);\n      }\n    } else {\n      clearTimeout(this.tooltipping);\n    }\n\n    this.tooltipping = setTimeout(() => {\n      if (options.transition) {\n        addListener(tooltipBox, EVENT_TRANSITION_END, () => {\n          removeClass(tooltipBox, CLASS_SHOW);\n          removeClass(tooltipBox, CLASS_FADE);\n          removeClass(tooltipBox, CLASS_TRANSITION);\n          this.fading = false;\n        }, {\n          once: true,\n        });\n\n        removeClass(tooltipBox, CLASS_IN);\n        this.fading = true;\n      } else {\n        removeClass(tooltipBox, CLASS_SHOW);\n      }\n\n      this.tooltipping = false;\n    }, 1000);\n\n    return this;\n  },\n\n  // Toggle the image size between its natural size and initial size\n  toggle() {\n    if (this.imageData.ratio === 1) {\n      this.zoomTo(this.initialImageData.ratio, true);\n    } else {\n      this.zoomTo(1, true);\n    }\n\n    return this;\n  },\n\n  // Reset the image to its initial state\n  reset() {\n    if (this.viewed && !this.played) {\n      this.imageData = assign({}, this.initialImageData);\n      this.renderImage();\n    }\n\n    return this;\n  },\n\n  // Update viewer when images changed\n  update() {\n    const { element, options, isImg } = this;\n\n    // Destroy viewer if the target image was deleted\n    if (isImg && !element.parentNode) {\n      return this.destroy();\n    }\n\n    const images = [];\n\n    forEach(isImg ? [element] : element.querySelectorAll('img'), (image) => {\n      if (options.filter) {\n        if (options.filter(image)) {\n          images.push(image);\n        }\n      } else {\n        images.push(image);\n      }\n    });\n\n    if (!images.length) {\n      return this;\n    }\n\n    this.images = images;\n    this.length = images.length;\n\n    if (this.ready) {\n      const indexes = [];\n\n      forEach(this.items, (item, i) => {\n        const img = item.querySelector('img');\n        const image = images[i];\n\n        if (image) {\n          if (image.src !== img.src) {\n            indexes.push(i);\n          }\n        } else {\n          indexes.push(i);\n        }\n      });\n\n      setStyle(this.list, {\n        width: 'auto',\n      });\n\n      this.initList();\n\n      if (this.isShown) {\n        if (this.length) {\n          if (this.viewed) {\n            const index = indexes.indexOf(this.index);\n\n            if (index >= 0) {\n              this.viewed = false;\n              this.view(Math.max(this.index - (index + 1), 0));\n            } else {\n              addClass(this.items[this.index], CLASS_ACTIVE);\n            }\n          }\n        } else {\n          this.image = null;\n          this.viewed = false;\n          this.index = 0;\n          this.imageData = {};\n          this.canvas.innerHTML = '';\n          this.title.innerHTML = '';\n        }\n      }\n    } else {\n      this.build();\n    }\n\n    return this;\n  },\n\n  // Destroy the viewer\n  destroy() {\n    const { element, options } = this;\n\n    if (!getData(element, NAMESPACE)) {\n      return this;\n    }\n\n    this.destroyed = true;\n\n    if (this.ready) {\n      if (this.played) {\n        this.stop();\n      }\n\n      if (options.inline) {\n        if (this.fulled) {\n          this.exit();\n        }\n\n        this.unbind();\n      } else if (this.isShown) {\n        if (this.viewing) {\n          if (this.imageRendering) {\n            this.imageRendering.abort();\n          } else if (this.imageInitializing) {\n            this.imageInitializing.abort();\n          }\n        }\n\n        if (this.hiding) {\n          this.transitioning.abort();\n        }\n\n        this.hidden();\n      } else if (this.showing) {\n        this.transitioning.abort();\n        this.hidden();\n      }\n\n      this.ready = false;\n      this.viewer.parentNode.removeChild(this.viewer);\n    } else if (options.inline) {\n      if (this.delaying) {\n        this.delaying.abort();\n      } else if (this.initializing) {\n        this.initializing.abort();\n      }\n    }\n\n    if (!options.inline) {\n      removeListener(element, EVENT_CLICK, this.onStart);\n    }\n\n    removeData(element, NAMESPACE);\n    return this;\n  },\n};\n","import {\n  ACTION_MOVE,\n  ACTION_SWITCH,\n  ACTION_ZOOM,\n  CLASS_HIDE,\n  CLASS_OPEN,\n  EVENT_HIDDEN,\n  EVENT_SHOWN,\n} from './constants';\nimport {\n  addClass,\n  addListener,\n  dispatchEvent,\n  forEach,\n  getMaxZoomRatio,\n  isFunction,\n  removeClass,\n} from './utilities';\n\nexport default {\n  open() {\n    const { body } = this;\n\n    addClass(body, CLASS_OPEN);\n\n    body.style.paddingRight = `${this.scrollbarWidth + (parseFloat(this.initialBodyPaddingRight) || 0)}px`;\n  },\n\n  close() {\n    const { body } = this;\n\n    removeClass(body, CLASS_OPEN);\n    body.style.paddingRight = this.initialBodyPaddingRight;\n  },\n\n  shown() {\n    const { element, options } = this;\n\n    this.fulled = true;\n    this.isShown = true;\n    this.render();\n    this.bind();\n    this.showing = false;\n\n    if (isFunction(options.shown)) {\n      addListener(element, EVENT_SHOWN, options.shown, {\n        once: true,\n      });\n    }\n\n    if (dispatchEvent(element, EVENT_SHOWN) === false) {\n      return;\n    }\n\n    if (this.ready && this.isShown && !this.hiding) {\n      this.view(this.index);\n    }\n  },\n\n  hidden() {\n    const { element, options } = this;\n\n    this.fulled = false;\n    this.viewed = false;\n    this.isShown = false;\n    this.close();\n    this.unbind();\n    addClass(this.viewer, CLASS_HIDE);\n    this.resetList();\n    this.resetImage();\n    this.hiding = false;\n\n    if (!this.destroyed) {\n      if (isFunction(options.hidden)) {\n        addListener(element, EVENT_HIDDEN, options.hidden, {\n          once: true,\n        });\n      }\n\n      dispatchEvent(element, EVENT_HIDDEN);\n    }\n  },\n\n  requestFullscreen() {\n    const document = this.element.ownerDocument;\n\n    if (this.fulled && !document.fullscreenElement && !document.mozFullScreenElement &&\n      !document.webkitFullscreenElement && !document.msFullscreenElement) {\n      const { documentElement } = document;\n\n      if (documentElement.requestFullscreen) {\n        documentElement.requestFullscreen();\n      } else if (documentElement.msRequestFullscreen) {\n        documentElement.msRequestFullscreen();\n      } else if (documentElement.mozRequestFullScreen) {\n        documentElement.mozRequestFullScreen();\n      } else if (documentElement.webkitRequestFullscreen) {\n        documentElement.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT);\n      }\n    }\n  },\n\n  exitFullscreen() {\n    if (this.fulled) {\n      const document = this.element.ownerDocument;\n\n      if (document.exitFullscreen) {\n        document.exitFullscreen();\n      } else if (document.msExitFullscreen) {\n        document.msExitFullscreen();\n      } else if (document.mozCancelFullScreen) {\n        document.mozCancelFullScreen();\n      } else if (document.webkitExitFullscreen) {\n        document.webkitExitFullscreen();\n      }\n    }\n  },\n\n  change(e) {\n    const { options, pointers } = this;\n    const pointer = pointers[Object.keys(pointers)[0]];\n    const offsetX = pointer.endX - pointer.startX;\n    const offsetY = pointer.endY - pointer.startY;\n\n    switch (this.action) {\n      // Move the current image\n      case ACTION_MOVE:\n        this.move(offsetX, offsetY);\n        break;\n\n      // Zoom the current image\n      case ACTION_ZOOM:\n        this.zoom(getMaxZoomRatio(pointers), false, e);\n        break;\n\n      case ACTION_SWITCH: {\n        this.action = 'switched';\n\n        const absoluteOffsetX = Math.abs(offsetX);\n\n        if (absoluteOffsetX > 1 && absoluteOffsetX > Math.abs(offsetY)) {\n          // Empty `pointers` as `touchend` event will not be fired after swiped in iOS browsers.\n          this.pointers = {};\n\n          if (offsetX > 1) {\n            this.prev(options.loop);\n          } else if (offsetX < -1) {\n            this.next(options.loop);\n          }\n        }\n\n        break;\n      }\n\n      default:\n    }\n\n    // Override\n    forEach(pointers, (p) => {\n      p.startX = p.endX;\n      p.startY = p.endY;\n    });\n  },\n\n  isSwitchable() {\n    const { imageData, viewerData } = this;\n\n    return this.length > 1 && imageData.left >= 0 && imageData.top >= 0 &&\n      imageData.width <= viewerData.width &&\n      imageData.height <= viewerData.height;\n  },\n};\n","import DEFAULTS from './defaults';\nimport TEMPLATE from './template';\nimport render from './render';\nimport events from './events';\nimport handlers from './handlers';\nimport methods from './methods';\nimport others from './others';\nimport {\n  BUTTONS,\n  CLASS_CLOSE,\n  CLASS_FADE,\n  CLASS_FIXED,\n  CLASS_FULLSCREEN,\n  CLASS_HIDE,\n  CLASS_INVISIBLE,\n  DATA_ACTION,\n  EVENT_CLICK,\n  EVENT_LOAD,\n  EVENT_READY,\n  NAMESPACE,\n  WINDOW,\n} from './constants';\nimport {\n  addClass,\n  addListener,\n  assign,\n  dispatchEvent,\n  forEach,\n  getData,\n  getResponsiveClass,\n  hyphenate,\n  isFunction,\n  isNumber,\n  isPlainObject,\n  isString,\n  isUndefined,\n  removeListener,\n  setData,\n  setStyle,\n  toggleClass,\n} from './utilities';\n\nconst AnotherViewer = WINDOW.Viewer;\n\nclass Viewer {\n  /**\n   * Create a new Viewer.\n   * @param {Element} element - The target element for viewing.\n   * @param {Object} [options={}] - The configuration options.\n   */\n  constructor(element, options = {}) {\n    if (!element || element.nodeType !== 1) {\n      throw new Error('The first argument is required and must be an element.');\n    }\n\n    this.element = element;\n    this.options = assign({}, DEFAULTS, isPlainObject(options) && options);\n    this.action = false;\n    this.fading = false;\n    this.fulled = false;\n    this.hiding = false;\n    this.imageData = {};\n    this.index = 0;\n    this.isImg = false;\n    this.isShown = false;\n    this.length = 0;\n    this.played = false;\n    this.playing = false;\n    this.pointers = {};\n    this.ready = false;\n    this.showing = false;\n    this.timeout = false;\n    this.tooltipping = false;\n    this.viewed = false;\n    this.viewing = false;\n    this.wheeling = false;\n    this.zooming = false;\n    this.init();\n  }\n\n  init() {\n    const { element, options } = this;\n\n    if (getData(element, NAMESPACE)) {\n      return;\n    }\n\n    setData(element, NAMESPACE, this);\n\n    const isImg = element.tagName.toLowerCase() === 'img';\n    const images = [];\n\n    forEach(isImg ? [element] : element.querySelectorAll('img'), (image) => {\n      if (isFunction(options.filter)) {\n        if (options.filter.call(this, image)) {\n          images.push(image);\n        }\n      } else {\n        images.push(image);\n      }\n    });\n\n    if (!images.length) {\n      return;\n    }\n\n    this.isImg = isImg;\n    this.length = images.length;\n    this.images = images;\n\n    const { ownerDocument } = element;\n    const body = ownerDocument.body || ownerDocument.documentElement;\n\n    this.body = body;\n    this.scrollbarWidth = window.innerWidth - ownerDocument.documentElement.clientWidth;\n    this.initialBodyPaddingRight = window.getComputedStyle(body).paddingRight;\n\n    // Override `transition` option if it is not supported\n    if (isUndefined(document.createElement(NAMESPACE).style.transition)) {\n      options.transition = false;\n    }\n\n    if (options.inline) {\n      let count = 0;\n      const progress = () => {\n        count += 1;\n\n        if (count === this.length) {\n          let timeout;\n\n          this.initializing = false;\n          this.delaying = {\n            abort: () => {\n              clearTimeout(timeout);\n            },\n          };\n\n          // build asynchronously to keep `this.viewer` is accessible in `ready` event handler.\n          timeout = setTimeout(() => {\n            this.delaying = false;\n            this.build();\n          }, 0);\n        }\n      };\n\n      this.initializing = {\n        abort() {\n          forEach(images, (image) => {\n            if (!image.complete) {\n              removeListener(image, EVENT_LOAD, progress);\n            }\n          });\n        },\n      };\n\n      forEach(images, (image) => {\n        if (image.complete) {\n          progress();\n        } else {\n          addListener(image, EVENT_LOAD, progress, {\n            once: true,\n          });\n        }\n      });\n    } else {\n      addListener(element, EVENT_CLICK, (this.onStart = ({ target }) => {\n        if (target.tagName.toLowerCase() === 'img') {\n          this.view(this.images.indexOf(target));\n        }\n      }));\n    }\n  }\n\n  build() {\n    if (this.ready) {\n      return;\n    }\n\n    const { element, options } = this;\n    const parent = element.parentNode;\n    const template = document.createElement('div');\n\n    template.innerHTML = TEMPLATE;\n\n    const viewer = template.querySelector(`.${NAMESPACE}-container`);\n    const title = viewer.querySelector(`.${NAMESPACE}-title`);\n    const toolbar = viewer.querySelector(`.${NAMESPACE}-toolbar`);\n    const navbar = viewer.querySelector(`.${NAMESPACE}-navbar`);\n    const button = viewer.querySelector(`.${NAMESPACE}-button`);\n    const canvas = viewer.querySelector(`.${NAMESPACE}-canvas`);\n\n    this.parent = parent;\n    this.viewer = viewer;\n    this.title = title;\n    this.toolbar = toolbar;\n    this.navbar = navbar;\n    this.button = button;\n    this.canvas = canvas;\n    this.footer = viewer.querySelector(`.${NAMESPACE}-footer`);\n    this.tooltipBox = viewer.querySelector(`.${NAMESPACE}-tooltip`);\n    this.player = viewer.querySelector(`.${NAMESPACE}-player`);\n    this.list = viewer.querySelector(`.${NAMESPACE}-list`);\n\n    addClass(title, !options.title ? CLASS_HIDE : getResponsiveClass(options.title));\n    addClass(navbar, !options.navbar ? CLASS_HIDE : getResponsiveClass(options.navbar));\n    toggleClass(button, CLASS_HIDE, !options.button);\n\n    if (options.backdrop) {\n      addClass(viewer, `${NAMESPACE}-backdrop`);\n\n      if (!options.inline && options.backdrop === true) {\n        setData(canvas, DATA_ACTION, 'hide');\n      }\n    }\n\n    if (options.toolbar) {\n      const list = document.createElement('ul');\n      const custom = isPlainObject(options.toolbar);\n      const zoomButtons = BUTTONS.slice(0, 3);\n      const rotateButtons = BUTTONS.slice(7, 9);\n      const scaleButtons = BUTTONS.slice(9);\n\n      if (!custom) {\n        addClass(toolbar, getResponsiveClass(options.toolbar));\n      }\n\n      forEach(custom ? options.toolbar : BUTTONS, (value, index) => {\n        const deep = custom && isPlainObject(value);\n        const name = custom ? hyphenate(index) : value;\n        const show = deep && !isUndefined(value.show) ? value.show : value;\n\n        if (\n          !show ||\n          (!options.zoomable && zoomButtons.indexOf(name) !== -1) ||\n          (!options.rotatable && rotateButtons.indexOf(name) !== -1) ||\n          (!options.scalable && scaleButtons.indexOf(name) !== -1)\n        ) {\n          return;\n        }\n\n        const size = deep && !isUndefined(value.size) ? value.size : value;\n        const click = deep && !isUndefined(value.click) ? value.click : value;\n        const item = document.createElement('li');\n\n        item.setAttribute('role', 'button');\n        addClass(item, `${NAMESPACE}-${name}`);\n\n        if (!isFunction(click)) {\n          setData(item, DATA_ACTION, name);\n        }\n\n        if (isNumber(show)) {\n          addClass(item, getResponsiveClass(show));\n        }\n\n        if (['small', 'large'].indexOf(size) !== -1) {\n          addClass(item, `${NAMESPACE}-${size}`);\n        } else if (name === 'play') {\n          addClass(item, `${NAMESPACE}-large`);\n        }\n\n        if (isFunction(click)) {\n          addListener(item, EVENT_CLICK, click);\n        }\n\n        list.appendChild(item);\n      });\n\n      toolbar.appendChild(list);\n    } else {\n      addClass(toolbar, CLASS_HIDE);\n    }\n\n    if (!options.rotatable) {\n      const rotates = toolbar.querySelectorAll('li[class*=\"rotate\"]');\n\n      addClass(rotates, CLASS_INVISIBLE);\n      forEach(rotates, (rotate) => {\n        toolbar.appendChild(rotate);\n      });\n    }\n\n    if (options.inline) {\n      addClass(button, CLASS_FULLSCREEN);\n      setStyle(viewer, {\n        zIndex: options.zIndexInline,\n      });\n\n      if (window.getComputedStyle(parent).position === 'static') {\n        setStyle(parent, {\n          position: 'relative',\n        });\n      }\n\n      parent.insertBefore(viewer, element.nextSibling);\n    } else {\n      addClass(button, CLASS_CLOSE);\n      addClass(viewer, CLASS_FIXED);\n      addClass(viewer, CLASS_FADE);\n      addClass(viewer, CLASS_HIDE);\n\n      setStyle(viewer, {\n        zIndex: options.zIndex,\n      });\n\n      let { container } = options;\n\n      if (isString(container)) {\n        container = element.ownerDocument.querySelector(container);\n      }\n\n      if (!container) {\n        container = this.body;\n      }\n\n      container.appendChild(viewer);\n    }\n\n    if (options.inline) {\n      this.render();\n      this.bind();\n      this.isShown = true;\n    }\n\n    this.ready = true;\n\n    if (isFunction(options.ready)) {\n      addListener(element, EVENT_READY, options.ready, {\n        once: true,\n      });\n    }\n\n    if (dispatchEvent(element, EVENT_READY) === false) {\n      this.ready = false;\n      return;\n    }\n\n    if (this.ready && options.inline) {\n      this.view();\n    }\n  }\n\n  /**\n   * Get the no conflict viewer class.\n   * @returns {Viewer} The viewer class.\n   */\n  static noConflict() {\n    window.Viewer = AnotherViewer;\n    return Viewer;\n  }\n\n  /**\n   * Change the default options.\n   * @param {Object} options - The new default options.\n   */\n  static setDefaults(options) {\n    assign(DEFAULTS, isPlainObject(options) && options);\n  }\n}\n\nassign(Viewer.prototype, render, events, handlers, methods, others);\n\nexport default Viewer;\n"],"names":["IN_BROWSER","window","WINDOW","NAMESPACE","ACTION_MOVE","ACTION_SWITCH","ACTION_ZOOM","CLASS_ACTIVE","CLASS_CLOSE","CLASS_FADE","CLASS_FIXED","CLASS_FULLSCREEN","CLASS_FULLSCREEN_EXIT","CLASS_HIDE","CLASS_HIDE_MD_DOWN","CLASS_HIDE_SM_DOWN","CLASS_HIDE_XS_DOWN","CLASS_IN","CLASS_INVISIBLE","CLASS_LOADING","CLASS_MOVE","CLASS_OPEN","CLASS_SHOW","CLASS_TRANSITION","EVENT_READY","EVENT_SHOW","EVENT_SHOWN","EVENT_HIDE","EVENT_HIDDEN","EVENT_VIEW","EVENT_VIEWED","EVENT_ZOOM","EVENT_ZOOMED","EVENT_CLICK","EVENT_DRAG_START","EVENT_KEY_DOWN","EVENT_LOAD","EVENT_POINTER_DOWN","PointerEvent","EVENT_POINTER_MOVE","EVENT_POINTER_UP","EVENT_RESIZE","EVENT_TRANSITION_END","EVENT_WHEEL","DATA_ACTION","BUTTONS","isString","value","isNaN","Number","isNumber","isUndefined","isObject","hasOwnProperty","Object","prototype","isPlainObject","constructor","call","e","isFunction","forEach","data","callback","Array","isArray","length","i","keys","key","assign","obj","args","arg","REGEXP_SUFFIX","setStyle","element","styles","style","property","test","hasClass","classList","contains","className","indexOf","addClass","elem","add","trim","removeClass","remove","replace","toggleClass","added","REGEXP_HYPHENATE","hyphenate","toLowerCase","getData","name","dataset","getAttribute","setData","setAttribute","removeData","undefined","removeAttribute","REGEXP_SPACES","onceSupported","supported","once","listener","options","defineProperty","addEventListener","removeEventListener","removeListener","type","handler","split","event","listeners","addListener","apply","dispatchEvent","Event","CustomEvent","document","createEvent","initCustomEvent","getOffset","box","getBoundingClientRect","left","pageXOffset","documentElement","clientLeft","top","pageYOffset","clientTop","getTransforms","rotate","scaleX","scaleY","translateX","translateY","values","push","transform","join","getImageNameFromURL","url","IS_SAFARI","navigator","userAgent","getImageNaturalSizes","image","newImage","createElement","naturalWidth","naturalHeight","body","onload","width","height","removeChild","src","cssText","appendChild","getResponsiveClass","getMaxZoomRatio","pointers","pointers2","ratios","pointer","pointerId","pointer2","x1","Math","abs","startX","y1","startY","x2","endX","y2","endY","z1","sqrt","z2","ratio","sort","a","b","getPointer","endOnly","pageX","pageY","end","getPointersCenter","count","initContainer","initViewer","initList","renderViewer","containerData","innerWidth","innerHeight","parent","viewerData","inline","max","offsetWidth","minWidth","offsetHeight","minHeight","parentData","fulled","viewer","list","items","images","alt","innerHTML","getElementsByTagName","item","firstElementChild","loading","loadImage","transition","index","outerWidth","done","footerHeight","footer","viewerWidth","viewerHeight","oldImageData","imageData","sizingImage","imageInitializing","aspectRatio","min","initialImageData","rotatable","scalable","viewing","zooming","onTransitionEnd","imageRendering","viewed","abort","parentNode","onClick","click","bind","onWheel","wheel","onDragStart","dragstart","canvas","onPointerDown","pointerdown","ownerDocument","onPointerMove","pointermove","onPointerUp","pointerup","onKeyDown","keydown","onResize","resize","target","action","played","stop","exit","full","hide","view","zoom","toggle","reset","prev","loop","play","fullscreen","next","timeout","initImage","movable","renderImage","parentWidth","parentHeight","filled","keyboard","keyCode","which","charCode","preventDefault","zoomRatio","ctrlKey","tagName","showing","hiding","changedTouches","touch","identifier","pointerType","isSwitchable","change","isShown","renderList","fullscreenElement","mozFullScreenElement","webkitFullscreenElement","msFullscreenElement","player","wheeling","delta","deltaY","wheelDelta","detail","immediate","ready","build","show","transitioning","open","shown","hidden","zoomTo","title","img","querySelector","onViewed","textContent","onLoad","complete","load","setTimeout","maxIndex","offsetX","offsetY","moveTo","x","y","changed","hasTooltip","_originalEvent","_zoomable","zoomable","minZoomRatio","maxZoomRatio","newWidth","newHeight","oldRatio","offset","center","zoomed","tooltip","degree","rotateTo","scale","total","onLoadWhenPlay","requestFullscreen","interval","playing","exitFullscreen","button","zIndex","close","zIndexInline","tooltipBox","round","tooltipping","fading","isImg","destroy","querySelectorAll","filter","indexes","destroyed","unbind","delaying","initializing","onStart","paddingRight","scrollbarWidth","parseFloat","initialBodyPaddingRight","render","resetList","resetImage","msRequestFullscreen","mozRequestFullScreen","webkitRequestFullscreen","Element","ALLOW_KEYBOARD_INPUT","msExitFullscreen","mozCancelFullScreen","webkitExitFullscreen","move","absoluteOffsetX","p","AnotherViewer","Viewer","nodeType","Error","DEFAULTS","init","clientWidth","getComputedStyle","progress","template","TEMPLATE","toolbar","navbar","backdrop","custom","zoomButtons","slice","rotateButtons","scaleButtons","deep","size","rotates","position","insertBefore","nextSibling","container","events","handlers","methods","others"],"mappings":"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"}